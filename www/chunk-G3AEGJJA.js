import{a as O}from"./chunk-ULK2QF2K.js";import{D as g,E as F,F as E,G as I,H as L,I as M,J as T,K as w,L as y,P,Q as k,S as N,T as q,U as G,V as j,Z as A,_ as D,g as r,h as f,i as C,j as d,k as m,l as _,m as n,n as o,o as p,p as h,q as v,r as l,s as x,t as b,z as S}from"./chunk-VXSH7XMA.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function R(e,i){if(e&1&&(n(0,"ion-text",2),l(1),o()),e&2){let a=v();r(),x(" ",a.errorMessage," ")}}function B(e,i){e&1&&(n(0,"div"),l(1,"El correo es requerido."),o())}function V(e,i){e&1&&(n(0,"div"),l(1,"Formato de correo inv\xE1lido."),o())}function z(e,i){if(e&1&&(n(0,"ion-text",5),d(1,B,2,0,"div"),d(2,V,2,0,"div"),o()),e&2){let a=v();r(),m(a.f.email.errors!=null&&a.f.email.errors.required?1:-1),r(),m(a.f.email.errors!=null&&a.f.email.errors.email?2:-1)}}function H(e,i){e&1&&(n(0,"div"),l(1,"La contrase\xF1a es requerida."),o())}function J(e,i){e&1&&(n(0,"div"),l(1,"La contrase\xF1a debe tener al menos 6 caracteres."),o())}function K(e,i){if(e&1&&(n(0,"ion-text",5),d(1,H,2,0,"div"),d(2,J,2,0,"div"),o()),e&2){let a=v();r(),m(a.f.password.errors!=null&&a.f.password.errors.required?1:-1),r(),m(a.f.password.errors!=null&&a.f.password.errors.minlength?2:-1)}}function Q(e,i){e&1&&p(0,"ion-spinner",10)}var ie=(()=>{let i=class i{constructor(u,s,t){this.fb=u,this.authService=s,this.router=t,this.loading=!1,this.errorMessage=null,this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]],rememberMe:[!1]},{updateOn:"blur"})}ngOnInit(){}get f(){return this.loginForm.controls}onSubmit(){if(this.errorMessage=null,this.loginForm.markAllAsTouched(),this.loginForm.invalid)return;let{email:u,password:s,rememberMe:t}=this.loginForm.value;this.loading=!0,this.authService.login({email:u,password:s}).pipe().subscribe({next:c=>{t&&c?.token&&this.authService.setToken(c.token),this.router.navigate(["/home"])},error:c=>{this.errorMessage=typeof c=="string"?c:"Error en login",console.error("Error en login",c),this.loading=!1},complete:()=>{this.loading=!1}})}logOut(){this.router.navigate(["/login"])}};i.\u0275fac=function(s){return new(s||i)(f(T),f(O),f(S))},i.\u0275cmp=C({type:i,selectors:[["app-login"]],decls:20,vars:6,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],["color","danger",1,"ion-padding-bottom"],["position","stacked"],["formControlName","email","type","email"],["color","danger",1,"ion-padding-start"],["formControlName","password","type","password"],["lines","none"],["slot","start","formControlName","rememberMe"],["type","submit","expand","block",3,"disabled"],["slot","start","name","dots"]],template:function(s,t){s&1&&(n(0,"ion-content",0)(1,"form",1),h("ngSubmit",function(){return t.onSubmit()}),d(2,R,2,1,"ion-text",2),n(3,"ion-item")(4,"ion-label",3),l(5,"Correo electr\xF3nico"),o(),p(6,"ion-input",4),o(),d(7,z,3,2,"ion-text",5),n(8,"ion-item")(9,"ion-label",3),l(10,"Contrase\xF1a"),o(),p(11,"ion-input",6),o(),d(12,K,3,2,"ion-text",5),n(13,"ion-item",7),p(14,"ion-checkbox",8),n(15,"ion-label"),l(16,"Recordarme"),o()(),n(17,"ion-button",9),d(18,Q,1,0,"ion-spinner",10),l(19," Iniciar sesi\xF3n "),o()()()),s&2&&(r(),_("formGroup",t.loginForm),r(),m(t.errorMessage?2:-1),r(5),m(t.f.email.touched&&t.f.email.invalid?7:-1),r(5),m(t.f.password.touched&&t.f.password.invalid?12:-1),r(5),_("disabled",!t.loginForm.valid||t.loading),r(),m(t.loading?18:-1))},dependencies:[k,N,P,q,D,G,j,A,b,w,I,F,E,y,L,M],encapsulation:2});let e=i;return e})();export{ie as LoginPage};
