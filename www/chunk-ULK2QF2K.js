import{a as p,b as l,c as s,d as n,e as c,f as h,v as a,w as m}from"./chunk-VXSH7XMA.js";var w=(()=>{let r=class r{constructor(t){this.http=t,this.apiUrl="https://reqres.in/api"}login(t){let e=`${this.apiUrl}/login`,f=new a({"x-api-key":"reqres-free-v1","Content-Type":"application/json"}),u={email:t.email,password:t.password};return this.http.post(e,u,{headers:f}).pipe(n(i=>{i&&i.token&&this.setToken(i.token)}),s(this.handleError))}register(t){return this.http.post(`${this.apiUrl}/register`,t)}logout(){let t=`${this.apiUrl}/logout`,e=new a({"x-api-key":"reqres-free-v1","Content-Type":"application/json"});return this.http.post(t,{},{headers:e}).pipe(s(()=>p(null)),n(()=>{localStorage.removeItem("auth_token")}))}setToken(t){localStorage.setItem("auth_token",t)}getToken(){return localStorage.getItem("auth_token")}isLoggedIn(){return!!this.getToken()}handleError(t){let e="Error desconocido";return t.error?.message?e=t.error.message:t.error?.error?e=t.error.error:t.status===0&&(e="No hay conexi\xF3n con el servidor"),l(()=>e)}};r.\u0275fac=function(e){return new(e||r)(h(m))},r.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{w as a};
